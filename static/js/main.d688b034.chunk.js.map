{"version":3,"sources":["componets/Searchbar/Searchbar.module.css","componets/Modal/Modal.module.css","componets/Spinner/Spiner.module.css","componets/ImageGallery/ImageGallery.module.css","componets/ButtonMore/ButtonMore.module.css","componets/BtnToTop/BtnToTop.module.css","componets/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","componets/Searchbar/Searchbar.js","componets/Spinner/Spinner.js","componets/ImageGallery/ImageGallery.js","componets/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","services/api-img-service.js","componets/ButtonMore/ButtonMore.js","componets/Modal/Modal.js","componets/BtnToTop/BtnToTop.js","App.js","services/modal-service.js","index.js"],"names":["module","exports","Searchbar","searchQueryToUp","useState","searchQuery","setSearchQuery","inputRef","useRef","className","s","SearchForm","onSubmit","e","preventDefault","trim","current","placeholder","toast","warn","autoClose","theme","icon","type","SearchFormButton","SearchFormInput","name","ref","value","onChange","currentTarget","pattern","title","Spinner","loaderBox","color","height","width","timeout","ImageGallery","children","ImageGalleryItem","contactObj","imgIdToUp","webformatURL","tags","largeImageURL","id","pageURL","href","ImageGalleryItemLink","onClick","src","alt","ImageGalleryItemImage","homePageUrl","target","rel","homeIcon","ImagesApiService","this","KEY","BASE_URL","page","orientation","imgType","query","a","url","axios","get","response","imgApiService","ButtonMore","clickOn","loadMoreButton","modalRoot","document","querySelector","Modal","closeModalClick","closeModalEsc","changeImg","modalOn","changeImgKey","useEffect","window","addEventListener","handleKeyDown","code","createPortal","Overlay","BtnToTop","status","setStatus","throttle","scrollWatch","scroll_position","scrollY","btnToTop","scrollTo","top","behavior","App","totalImg","setTotalImg","setPage","imgObjArr","setImgObjArr","showModal","setShowModal","setLargeImageURL","setTags","imgId","setImgId","fetchImages","newRequest","console","log","data","totalHits","hits","fetchData","loadMore","newPage","setState","scrollPoint","prevState","scrollToElId","length","Math","floor","getBoundingClientRect","bottom","setTimeout","toggleModal","openModal","imageId","arr","soughtIndex","findIndex","item","Number","parseInt","lrgImgURL","imgTags","imgNo","imgOpen","moveImg","direction","innerWidth","curImgIndex","nextImgIndex","modalImageRun","changeModalImg","toUpperCase","map","clientX","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d688b034.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3HNZU\",\"SearchForm\":\"Searchbar_SearchForm__8o77d\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1uFcP\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1htPs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1er8M\",\"Modal\":\"Modal_Modal__1QTqx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loaderBox\":\"Spiner_loaderBox__1nwwd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3-FIX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loadMoreButton\":\"ButtonMore_loadMoreButton__ua9L4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnToTop\":\"BtnToTop_btnToTop__2dByU\",\"hide-el\":\"BtnToTop_hide-el__33bSu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1appm\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2GOm3\",\"homePageUrl\":\"ImageGalleryItem_homePageUrl__17cJl\",\"homeIcon\":\"ImageGalleryItem_homeIcon__3sNRd\"};","import { useState, useRef } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\nimport { ImSearch } from 'react-icons/im';\r\nimport s from './Searchbar.module.css';\r\n\r\nconst Searchbar = ({searchQueryToUp}) => {\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n\r\n    const inputRef = useRef();\r\n\r\n    const handleInputChange = e => setSearchQuery(e.currentTarget.value);\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        if (searchQuery.trim() === '') {\r\n            toast.warn('Введи что-то!', {\r\n                autoClose: 2000,\r\n                theme: \"colored\",\r\n                icon: false,\r\n                }\r\n            );\r\n            return;\r\n        };\r\n        searchQueryToUp(searchQuery);\r\n        inputRef.current.placeholder = searchQuery;\r\n        setSearchQuery('');\r\n    };\r\n    \r\n    return (\r\n        <div className={s.Searchbar} >\r\n            <form className={s.SearchForm} onSubmit={handleSubmit}>\r\n                <button type=\"submit\" className={s.SearchFormButton}>\r\n                    <ImSearch />\r\n                </button>\r\n                <label >\r\n                    <input\r\n                        className={s.SearchFormInput}\r\n                        type=\"text\"\r\n                        name=\"searchInput\"\r\n                        ref={inputRef}\r\n                        placeholder=\"search\"\r\n                        value={searchQuery}\r\n                        onChange={handleInputChange}\r\n                        pattern=\"^[0-9a-zA-Zа-яА-Я]+(([' -][a-zA-Zа-яА-Я ])?[a-zA-Zа-яА-Я]*)*$\"\r\n                        title=\"Поисковое слово может состоять только из букв, апострофа, тире, цифр и пробелов.\"\r\n                    // required\r\n                    />\r\n                </label>\r\n            </form>\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nSearchbar.propTypes = {\r\n    searchQuery: PropTypes.string,\r\n};   \r\n\r\nexport default Searchbar;","import React from 'react';\r\nimport Loader from \"react-loader-spinner\";\r\nimport s from './Spiner.module.css';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className={s.loaderBox}>\r\n      <Loader\r\n        type=\"Circles\"  //Audio Bars BallTriangle Circles Grid Oval Puff Rings TailSpin ThreeDots Hearts\r\n        color=\"#617a53\"\r\n        height={160}\r\n        width={160}\r\n        timeout={5000} // ms\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport s from './ImageGallery.module.css';\r\n\r\nconst ImageGallery = ({children}) => {\r\n    return (\r\n        <ul className={s.ImageGallery} >\r\n            {children}\r\n        </ul>\r\n    );\r\n    \r\n};\r\n\r\nexport default ImageGallery;","import React from 'react';import PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\nimport { ImHome } from 'react-icons/im';\r\n\r\n\r\nconst ImageGalleryItem = ({ contactObj, imgIdToUp }) => {\r\n    const { webformatURL, tags, largeImageURL, id, pageURL } = contactObj;\r\n    return (\r\n        <li className={s.ImageGalleryItem}>\r\n            <a\r\n                href={largeImageURL}\r\n                id={id}\r\n                className={s.ImageGalleryItemLink}\r\n                onClick={e => {\r\n                    e.preventDefault();\r\n                    return imgIdToUp(e.currentTarget.id);\r\n                }}\r\n            >\r\n                <img src={webformatURL} alt={tags} className={s.ImageGalleryItemImage} />\r\n            </a>\r\n            <a\r\n                href={pageURL} className={s.homePageUrl} target=\"_blank\" rel=\"noreferrer\"\r\n            >\r\n                <ImHome className={s.homeIcon}/>\r\n            </a>\r\n        </li>\r\n        \r\n    );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n    webformatURL: PropTypes.string,\r\n    tags: PropTypes.string,\r\n    id: PropTypes.number,\r\n    pageURL: PropTypes.string\r\n};\r\n\r\nexport default ImageGalleryItem;","import axios from '../../node_modules/axios';\r\n\r\nclass ImagesApiService {\r\n    constructor() {\r\n        this.searchQuery = '';\r\n        this.KEY = '22984321-98218ca8e9b1f3be57a008ac4&q';\r\n        this.BASE_URL = 'https://pixabay.com/api/';\r\n        this.page = 1;\r\n        this.orientation = 'all';\r\n        this.imgType = 'all';\r\n    }\r\n\r\n    /* вариант используя async-away + axios + try-catch, который применен в ф-ции выше*/\r\n    \r\n    async fetchImages(query, page) {\r\n        this.searchQuery = query;\r\n        this.page = page;\r\n        const url = `${this.BASE_URL}?image_type=${this.imgType}&orientation=${this.orientation}&page=${this.page}&per_page=12&key=${this.KEY}&q=${this.searchQuery}`;\r\n        const response = await axios.get(url);\r\n        return response;\r\n    }\r\n    \r\n    // incrementPage() {\r\n    //     this.page += 1;\r\n    // }\r\n\r\n    // resetPage() {\r\n    //     this.page = 1;\r\n    // }\r\n\r\n    // get query() {\r\n    //     return this.searchQuery;\r\n    // }\r\n\r\n    // set query(newQuery) {\r\n    //     this.searchQuery = newQuery;\r\n    // }\r\n};\r\n\r\nconst imgApiService = new ImagesApiService();\r\n\r\nexport default imgApiService;","import React from 'react';\r\nimport s from './ButtonMore.module.css';\r\n\r\nconst ButtonMore = ({clickOn}) => {\r\n    return (\r\n        <button type=\"button\" className={s.loadMoreButton} onClick={() => clickOn(true)}>Load more</button>\r\n    );\r\n};\r\n\r\nexport default ButtonMore;\r\n","import React, {useEffect} from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nconst Modal = ({ closeModalClick, changeImg, closeModalEsc, modalOn, changeImgKey, children }) => {\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('keydown', e => handleKeyDown(e))\r\n    });\r\n\r\n    // window.removeEventListener('keydown', handleKeyDown);\r\n    \r\n    const closeModal = e => {\r\n        e.target === e.currentTarget && closeModalClick(true)\r\n    };\r\n\r\n    const handleKeyDown = e => {\r\n        (e.code === 'Escape') && closeModalEsc();\r\n        // (e.code === \"ArrowRight\" || e.code === \"ArrowLeft\") && changeImg(e.code);\r\n    };\r\n\r\n\r\n    return createPortal(\r\n\r\n        <div className={s.Overlay} onClick={closeModal} >\r\n            <div className={s.Modal}>\r\n                {children}\r\n            </div>\r\n        </div>,\r\n\r\n        modalRoot,\r\n    );\r\n};\r\n\r\nexport default Modal;\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { throttle } from 'throttle-debounce';\r\nimport { IoArrowUpSharp } from \"react-icons/io5\";\r\nimport s from './BtnToTop.module.css';\r\n\r\nconst BtnToTop = () => {\r\n    const [status, setStatus] = useState('hide');\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', throttle(500, e => scrollWatch()));\r\n    });\r\n\r\n    const scrollWatch = () => {\r\n        let scroll_position = window.scrollY;\r\n        scroll_position > 140 ?\r\n            setStatus('visible') :\r\n            setStatus('hide');\r\n    };\r\n\r\n    const toTop = () => {\r\n        window.scrollTo({\r\n            top: 0,\r\n            behavior: 'smooth',\r\n        });  \r\n    };\r\n\r\n    return (\r\n        <>\r\n        {(status === 'visible') &&\r\n            <button type=\"button\"\r\n                className={s.btnToTop}\r\n                onClick={toTop}>\r\n                    <IoArrowUpSharp/>\r\n            </button>}\r\n        <></> \r\n        </>  \r\n    );\r\n\r\n};\r\n\r\nexport default BtnToTop;","import { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Searchbar from './componets/Searchbar';\r\nimport Spinner from './componets/Spinner';\r\nimport ImageGallery from './componets/ImageGallery';\r\nimport ImageGalleryItem from './componets/ImageGallery/ImageGalleryItem';\r\nimport imgApiService from './services/api-img-service';\r\nimport ButtonMore from './componets/ButtonMore';\r\nimport Modal from './componets/Modal';\r\nimport BtnToTop from './componets/BtnToTop'\r\nimport { imgOpen, changeModalImg  } from './services/modal-service';\r\n\r\nfunction App() {\r\n    \r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [status, setStatus] = useState('idle');\r\n    const [totalImg, setTotalImg] = useState(0);\r\n    let [page, setPage] = useState(1);\r\n    const [imgObjArr, setImgObjArr] = useState([]);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [largeImageURL, setLargeImageURL] = useState('');\r\n    const [tags, setTags] = useState('');\r\n    const [imgId, setImgId] = useState(0);\r\n\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            if (!searchQuery) {\r\n                return setStatus('idle');\r\n            };\r\n            setStatus('pending');\r\n            let newRequest;\r\n            try {\r\n                newRequest = await imgApiService.fetchImages(searchQuery, 1);\r\n            }\r\n            catch (error) {\r\n                console.log('Error: request failed');\r\n                return setStatus('failed')\r\n            };\r\n\r\n            if (newRequest.data.totalHits === 0) {\r\n                return setStatus('rejected')\r\n            };\r\n\r\n            setImgObjArr([...newRequest.data.hits]);\r\n            setTotalImg(newRequest.data.totalHits);\r\n            setStatus('resolved');\r\n        };\r\n\r\n        fetchData();\r\n    }, [searchQuery]);\r\n\r\n    const searchQuerySubmit = query => {\r\n        setSearchQuery(query);\r\n        setPage(1);\r\n    };\r\n\r\n    const loadMore = async () => {\r\n        let newRequest;\r\n        let newPage = page + 1;\r\n        try {\r\n            newRequest = await imgApiService.fetchImages(searchQuery, newPage);\r\n        }\r\n        catch (error) {\r\n            console.log('Error: request failed');\r\n            return this.setState({status: 'failed'})\r\n        };\r\n\r\n        let scrollPoint = 0;\r\n            \r\n        setImgObjArr((prevState) => {\r\n            let scrollToElId = prevState[prevState.length - 1].id;\r\n            scrollPoint = window.scrollY + Math.floor(document.querySelector(`[id=\"${scrollToElId}\"]`).getBoundingClientRect().bottom) - 32;\r\n            return [...prevState, ...newRequest.data.hits]\r\n        });\r\n        setPage(newPage);\r\n        setTotalImg(newRequest.data.totalHits);\r\n\r\n        setTimeout(() => {\r\n            window.scrollTo({\r\n                top: scrollPoint,\r\n                behavior: 'smooth',\r\n            }); \r\n        }, 500);\r\n    };\r\n\r\n    // let scrollPoint = 0;\r\n\r\n    // const scrollFoo = () => {\r\n    //     window.scrollTo({\r\n    //             top: scrollPoint,\r\n    //             behavior: 'smooth',\r\n    //         }); \r\n    // };\r\n\r\n    const closeModalClick = (data) => {\r\n       data && toggleModal()\r\n    };\r\n\r\n    const toggleModal = () => {\r\n        setShowModal(!showModal);\r\n    };\r\n\r\n    const openModal = (imageId) => {\r\n        const { lrgImgURL, imgTags, imgNo } = imgOpen(imageId, imgObjArr);\r\n        setShowModal(!showModal);\r\n        setImgId(imgNo);\r\n        setLargeImageURL(lrgImgURL);\r\n        setTags(imgTags);\r\n    };\r\n\r\n    const moveImg = value => {\r\n        const { lrgImgURL, imgTags, imgNo } = changeModalImg(value, imgId, imgObjArr);\r\n        setImgId(imgNo);\r\n        setLargeImageURL(lrgImgURL);\r\n        setTags(imgTags);\r\n    };\r\n\r\n\r\n    return (\r\n\r\n        <div className=\"App\">\r\n\r\n            <Searchbar searchQueryToUp={searchQuerySubmit} />\r\n\r\n            {(status === 'idle') && <h2 className=\"galleryTitle\">Введите запрос</h2>}\r\n\r\n            {(status === 'pending') && <Spinner/>}\r\n\r\n            {(status === 'rejected') && <h2 className=\"galleryTitle\">По запросу \"{searchQuery.toUpperCase()}\" ничего не найдено</h2>}\r\n\r\n            {(status === 'failed') && <h2 className=\"galleryTitle\">Error: request failed. Нет соединения с интернетом или сервером</h2>}\r\n\r\n            {(status === 'resolved') && (\r\n                <>\r\n                    <h2 className=\"galleryTitle\">Найдено {totalImg} изображений по запросу \"{searchQuery.toUpperCase()}\":</h2>\r\n\r\n                    <ImageGallery>\r\n                        {imgObjArr.map(item => {\r\n                            const { id } = item;\r\n                            return (\r\n                                <ImageGalleryItem key={id} contactObj={item} imgIdToUp={openModal }/>\r\n                            );\r\n                        })}\r\n                    </ImageGallery>\r\n                </>   \r\n            )}\r\n\r\n            {(page * 12 < totalImg) && <ButtonMore clickOn={loadMore}/>}\r\n            {((page * 12 >= totalImg) && (status === 'resolved')) && <h2 className=\"galleryTitle\">Запрос \"{searchQuery.toUpperCase()}\" успешно выполнен</h2>}\r\n        \r\n            <ToastContainer />\r\n\r\n            <BtnToTop/>\r\n            \r\n            {showModal &&\r\n                <Modal closeModalClick={closeModalClick} closeModalEsc={toggleModal} changeImg={moveImg} modalOn={showModal}>\r\n                    <img src={largeImageURL} alt={tags} className=\"modalImg\" onClick={e => moveImg(e.clientX)}/>\r\n                </Modal>}\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport default App;","/* ===== опредилени данных предстоящей картинки ===== */\r\n\r\nexport function imgOpen(id, arr) {\r\n    const soughtIndex = arr.findIndex(item => item.id === Number.parseInt(id) );\r\n    const lrgImgURL = arr[soughtIndex].largeImageURL;\r\n    const imgTags = arr[soughtIndex].tags;\r\n    const imgNo = arr[soughtIndex].id;\r\n    return {lrgImgURL, imgTags, imgNo}\r\n};\r\n\r\n/* ===== изменение данных картинки ===== */\r\n \r\nexport function modalImageRun(direction, id, arr) {\r\n\r\n    const curImgIndex = arr.findIndex(item => item.id === id);\r\n\r\n    let nextImgIndex = 0;\r\n\r\n    if (direction === 'right') {\r\n        curImgIndex === arr.length - 1 ?\r\n        nextImgIndex = 0 :\r\n        nextImgIndex = curImgIndex + 1; \r\n    } else {\r\n        curImgIndex === 0 ?\r\n        nextImgIndex = arr.length - 1 :\r\n        nextImgIndex = curImgIndex - 1;\r\n    };\r\n\r\n    let lrgImgURL = arr[nextImgIndex].largeImageURL;\r\n    let imgTags = arr[nextImgIndex].tags;\r\n    let imgNo = arr[nextImgIndex].id;\r\n    \r\n    return { lrgImgURL, imgTags, imgNo };\r\n};\r\n\r\n/* ===== перелистывание картинок в модальном окне клиом мыши===== */\r\n\r\nexport function changeModalImg(value, id, arr) {\r\n    \r\n    let direction = '';\r\n\r\n    // if (value === \"ArrowRight\" || value >= (window.innerWidth / 2)) {\r\n    //     direction = 'right';\r\n    //     return modalImageRun(direction, id, arr);\r\n    // };\r\n\r\n    // if (value === \"ArrowLeft\" || value < (window.innerWidth / 2)) {\r\n    //     direction = 'left';\r\n    //     return modalImageRun(direction, id, arr);\r\n    // };\r\n    (value >= (window.innerWidth / 2)) && (direction = 'right');\r\n    (value < (window.innerWidth / 2)) && (direction = 'left');\r\n\r\n    return modalImageRun(direction, id, arr);\r\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'modern-normalize/modern-normalize.css';\nimport App from './App';\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n\nconsole.log('Привіт, світ! Життя химерне!');\n\n\n"],"sourceRoot":""}