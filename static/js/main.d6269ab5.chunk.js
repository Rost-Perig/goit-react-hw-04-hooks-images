(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__3HNZU",SearchForm:"Searchbar_SearchForm__8o77d",SearchFormButton:"Searchbar_SearchFormButton__1uFcP",SearchFormInput:"Searchbar_SearchFormInput__1htPs"}},19:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1er8M",Modal:"Modal_Modal__1QTqx"}},29:function(e,t,a){e.exports={loaderBox:"Spiner_loaderBox__1nwwd"}},30:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3-FIX"}},34:function(e,t,a){e.exports={loadMoreButton:"ButtonMore_loadMoreButton__ua9L4"}},36:function(e,t,a){e.exports={btnToTop:"BtnToTop_btnToTop__2dByU","hide-el":"BtnToTop_hide-el__33bSu"}},42:function(e,t,a){},45:function(e,t,a){},8:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1appm",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__2GOm3",homePageUrl:"ImageGalleryItem_homePageUrl__17cJl",homeIcon:"ImageGalleryItem_homeIcon__3sNRd"}},86:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(7),o=a.n(c),s=(a(42),a(43),a(6)),i=a.n(s),l=a(17),u=a(10),h=a(4),m=(a(45),a(16)),d=(a(46),a(15)),b=a(11),j=a.n(b),g=a(2),f=function(e){var t=e.searchQueryToUp,a=Object(r.useState)("hdr"),n=Object(h.a)(a,2),c=n[0],o=n[1],s=Object(r.useRef)();Object(r.useEffect)((function(){""!==c.trim()&&(t(c),s.current.placeholder=c,o(""))}),[]);return Object(g.jsx)("div",{className:j.a.Searchbar,children:Object(g.jsxs)("form",{className:j.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),s.current.placeholder=c,o("")):m.b.warn("\u0412\u0432\u0435\u0434\u0438 \u0447\u0442\u043e-\u0442\u043e!",{autoClose:2e3,theme:"colored",icon:!1})},children:[Object(g.jsx)("button",{type:"submit",className:j.a.SearchFormButton,children:Object(g.jsx)(d.b,{})}),Object(g.jsx)("label",{children:Object(g.jsx)("input",{className:j.a.SearchFormInput,type:"text",name:"searchInput",ref:s,placeholder:"search",value:c,onChange:function(e){return o(e.currentTarget.value)},pattern:"^[0-9a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u041f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435, \u0446\u0438\u0444\u0440 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432."})})]})})},p=a(28),O=a.n(p),x=a(29),I=a.n(x),v=function(){return Object(g.jsx)("div",{className:I.a.loaderBox,children:Object(g.jsx)(O.a,{type:"Circles",color:"#617a53",height:160,width:160,timeout:5e3})})},_=a(30),y=a.n(_),S=function(e){var t=e.children;return Object(g.jsx)("ul",{className:y.a.ImageGallery,children:t})},w=a(8),T=a.n(w),N=function(e){var t=e.contactObj,a=e.imgIdToUp,r=t.webformatURL,n=t.tags,c=t.largeImageURL,o=t.id,s=t.pageURL;return Object(g.jsxs)("li",{className:T.a.ImageGalleryItem,children:[Object(g.jsx)("a",{href:c,id:o,className:T.a.ImageGalleryItemLink,onClick:function(e){return e.preventDefault(),a(e.currentTarget.id)},children:Object(g.jsx)("img",{src:r,alt:n,className:T.a.ImageGalleryItemImage})}),Object(g.jsx)("a",{href:s,className:T.a.homePageUrl,target:"_blank",rel:"noreferrer",children:Object(g.jsx)(d.a,{className:T.a.homeIcon})})]})},k=a(31),U=a(32),B=a(33),E=a.n(B),G=function(){function e(){Object(k.a)(this,e),this.searchQuery="",this.KEY="22984321-98218ca8e9b1f3be57a008ac4&q",this.BASE_URL="https://pixabay.com/api/",this.page=1,this.orientation="all",this.imgType="all"}return Object(U.a)(e,[{key:"fetchImages",value:function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchQuery=t,this.page=a,r="".concat(this.BASE_URL,"?image_type=").concat(this.imgType,"&orientation=").concat(this.orientation,"&page=").concat(this.page,"&per_page=12&key=").concat(this.KEY,"&q=").concat(this.searchQuery),e.next=5,E.a.get(r);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),L=new G,M=a(34),C=a.n(M),F=function(e){var t=e.clickOn;return Object(g.jsx)("button",{type:"button",className:C.a.loadMoreButton,onClick:function(){return t(!0)},children:"Load more"})},R=a(19),q=a.n(R),A=document.querySelector("#modal-root"),P=function(e){var t=e.closeModalClick,a=(e.changeImg,e.closeModalEsc),n=(e.modalOn,e.changeImgKey,e.children);Object(r.useEffect)((function(){window.addEventListener("keydown",(function(e){return o(e)}))}));var o=function(e){"Escape"===e.code&&a()};return Object(c.createPortal)(Object(g.jsx)("div",{className:q.a.Overlay,onClick:function(e){e.target===e.currentTarget&&t(!0)},children:Object(g.jsx)("div",{className:q.a.Modal,children:n})}),A)},Q=a(35),H=a(37),Y=a(36),Z=a.n(Y),z=function(){var e=Object(r.useState)("hide"),t=Object(h.a)(e,2),a=t[0],n=t[1];Object(r.useEffect)((function(){window.addEventListener("scroll",Object(Q.a)(500,(function(e){return c()})))}));var c=function(){var e=window.scrollY;n(e>140?"visible":"hide")};return Object(g.jsxs)(g.Fragment,{children:["visible"===a&&Object(g.jsx)("button",{type:"button",className:Z.a.btnToTop,onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:Object(g.jsx)(H.a,{})}),Object(g.jsx)(g.Fragment,{})]})};var J=function(){var e=this,t=Object(r.useState)(""),a=Object(h.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)("idle"),s=Object(h.a)(o,2),d=s[0],b=s[1],j=Object(r.useState)(0),p=Object(h.a)(j,2),O=p[0],x=p[1],I=Object(r.useState)(1),_=Object(h.a)(I,2),y=_[0],w=_[1],T=Object(r.useState)([]),k=Object(h.a)(T,2),U=k[0],B=k[1],E=Object(r.useState)(!1),G=Object(h.a)(E,2),M=G[0],C=G[1],R=Object(r.useState)(""),q=Object(h.a)(R,2),A=q[0],Q=q[1],H=Object(r.useState)(""),Y=Object(h.a)(H,2),Z=Y[0],J=Y[1],K=Object(r.useState)(0),D=Object(h.a)(K,2),W=D[0],X=D[1];Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",b("idle"));case 2:return b("pending"),e.prev=4,e.next=7,L.fetchImages(n,1);case 7:t=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log("Error: request failed"),e.abrupt("return",b("failed"));case 14:if(0!==t.data.totalHits){e.next=17;break}return e.abrupt("return",b("rejected"));case 17:B(Object(l.a)(t.data.hits)),x(t.data.totalHits),b("resolved");case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]);var $=function(){var t=Object(u.a)(i.a.mark((function t(){var a,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=y+1,t.prev=1,t.next=4,L.fetchImages(n,r);case 4:a=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),console.log("Error: request failed"),t.abrupt("return",e.setState({status:"failed"}));case 11:c=0,B((function(e){var t=e[e.length-1].id;return c=window.scrollY+Math.floor(document.querySelector('[id="'.concat(t,'"]')).getBoundingClientRect().bottom)-32,[].concat(Object(l.a)(e),Object(l.a)(a.data.hits))})),w(r),x(a.data.totalHits),setTimeout((function(){window.scrollTo({top:c,behavior:"smooth"})}),500);case 17:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),V=function(){C(!M)},ee=function(e){var t=function(e,t){var a=t.findIndex((function(t){return t.id===Number.parseInt(e)}));return{lrgImgURL:t[a].largeImageURL,imgTags:t[a].tags,imgNo:t[a].id}}(e,U),a=t.lrgImgURL,r=t.imgTags,n=t.imgNo;C(!M),X(n),Q(a),J(r)},te=function(e){var t=function(e,t,a){var r="";return e>=window.innerWidth/2&&(r="right"),e<window.innerWidth/2&&(r="left"),function(e,t,a){var r=a.findIndex((function(e){return e.id===t})),n=0;return{lrgImgURL:a[n="right"===e?r===a.length-1?0:r+1:0===r?a.length-1:r-1].largeImageURL,imgTags:a[n].tags,imgNo:a[n].id}}(r,t,a)}(e,W,U),a=t.lrgImgURL,r=t.imgTags,n=t.imgNo;X(n),Q(a),J(r)};return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(f,{searchQueryToUp:function(e){c(e),w(1)}}),"idle"===d&&Object(g.jsx)("h2",{className:"galleryTitle",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441"}),"pending"===d&&Object(g.jsx)(v,{}),"rejected"===d&&Object(g.jsxs)("h2",{className:"galleryTitle",children:['\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "',n.toUpperCase(),'" \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e']}),"failed"===d&&Object(g.jsx)("h2",{className:"galleryTitle",children:"Error: request failed. \u041d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c"}),"resolved"===d&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("h2",{className:"galleryTitle",children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e ",O,' \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "',n.toUpperCase(),'":']}),Object(g.jsx)(S,{children:U.map((function(e){var t=e.id;return Object(g.jsx)(N,{contactObj:e,imgIdToUp:ee},t)}))})]}),12*y<O&&Object(g.jsx)(F,{clickOn:$}),12*y>=O&&"resolved"===d&&Object(g.jsxs)("h2",{className:"galleryTitle",children:['\u0417\u0430\u043f\u0440\u043e\u0441 "',n.toUpperCase(),'" \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d']}),Object(g.jsx)(m.a,{}),Object(g.jsx)(z,{}),M&&Object(g.jsx)(P,{closeModalClick:function(e){e&&V()},closeModalEsc:V,changeImg:te,modalOn:M,children:Object(g.jsx)("img",{src:A,alt:Z,className:"modalImg",onClick:function(e){return te(e.clientX)}})})]})};o.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(J,{})}),document.getElementById("root")),console.log("\u041f\u0440\u0438\u0432\u0456\u0442, \u0441\u0432\u0456\u0442! \u0416\u0438\u0442\u0442\u044f \u0445\u0438\u043c\u0435\u0440\u043d\u0435!")}},[[86,1,2]]]);
//# sourceMappingURL=main.d6269ab5.chunk.js.map